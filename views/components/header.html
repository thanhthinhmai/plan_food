<html>

<body>
    {% include "components/head.html" %}
    <header id="home" class="navbar-fixed-top">
        <div class="header_top_menu clearfix">
            <div class="container">
                <div class="row">
                    <div class="col-md-5 col-md-offset-3 col-sm-12 text-right">
                        <div class="call_us_text">
                            <a href=""><i class="fa fa-clock-o"></i> Order Foods 24/7</a>
                            <a href=""><i class="fa fa-phone"></i>0961213954</a>
                        </div>
                    </div>

                    <div class="col-md-4 col-sm-12">
                        <div class="head_top_social text-right">
                            <a href=""><i class="fa fa-facebook"></i></a>
                            <a href=""><i class="fa fa-google-plus"></i></a>
                            <a href=""><i class="fa fa-twitter"></i></a>
                            <a href=""><i class="fa fa-linkedin"></i></a>
                            <a href=""><i class="fa fa-pinterest-p"></i></a>
                            <a href=""><i class="fa fa-youtube"></i></a>
                            <a href=""><i class="fa fa-phone"></i></a>
                            <a href=""><i class="fa fa-camera"></i></a>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- End navbar-collapse-->

        <div class="main_menu_bg">
            <div class="container">
                <div class="row">
                    <nav class="navbar navbar-default">
                        <div class="container-fluid">
                            <!-- Brand and toggle get grouped for better mobile display -->
                            <div class="navbar-header">
                                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
                                <a class="navbar-brand our_logo" href="#"><img src="/images/logo.png" alt="" /></a>
                            </div>

                            <!-- Collect the nav links, forms, and other content for toggling -->
                            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                <form action="/quest" method="post" style="display:inline; position: relative; margin-left: 350px" >
                                    <input type="text" name="search" style="margin:1% 0 0 25%; width:250px; position: absolute;padding: 0.5%; border-radius: 4px; margin-top: 5px;padding-left: 50px; height:36px ; border: none">
                                    <button type="submit" class="btn btn-primary"  style="position: absolute;margin-top: 5px;border-top-right-radius: 0; border-bottom-right-radius: 0"><i class="fa fa-search" aria-hidden="true"></i></button>
                                    </input>
                                </form>
                                {% if not email %}
                                <ul class="nav navbar-nav navbar-right">

                                    <li><a href="/">Home</a></li>
                                    <li><a href="/menu">Menu</a></li>
                                    <li><a href="#">Delivery</a></li>

                                    <li>
                                        <button type="button" class="btn btn-info btn-sm" id="signin" data-toggle="modal" data-target="#myModal1">Sign In</button>
                                        <!-- Trigger the modal with a button -->
                                        <!-- Modal -->
                                        <div class="modal fade" id="myModal1" role="dialog">
                                            <div class="modal-dialog">
                                                <!-- Modal content-->
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                        <h4 class="modal-title" style="text-align:center">Form Sign In</h4>
                                                    </div>
                                                    <div class="alert alert-success wsalert wssignup-s" role="alert">
                                                        This is a success alert—check it out!
                                                    </div>
                                                    <div class="alert alert-warning wsalert wssignup-w" role="alert">
                                                        This is a warning alert—check it out!
                                                    </div>
                                                    <div class="modal-body">
                                                        <form action="/signin" method="post" id="signin1">
                                                            <div class="form-group">

                                                                <input type="text" class="form-control" id="em" name="em" placeholder="Enter email">
                                                            </div>
                                                            <div class="form-group">

                                                                <input type="password" class="form-control" id="pwd" name="pwd" placeholder="Enter password">
                                                            </div>

                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-danger" onclick="Signin()" data-dismiss="">Sign In</button>
                                                    </div>
                                                    </form>
                                                </div>

                                            </div>
                                        </div>

                                    </li>

                                    <li>
                                        <button type="button" class="btn btn-info btn-sm" id="signup" data-toggle="modal" data-target="#myModal">Sign Up</button>
                                        <!-- Trigger the modal with a button -->
                                        <!-- Modal -->
                                        <div class="modal fade" id="myModal" role="dialog">
                                            <div class="modal-dialog">
                                                <!-- Modal content-->
                                                <div class="modal-content" id="content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                        <h4 class="modal-title" style="text-align:center">Form Sign Up</h4>
                                                    </div>
                                                    <div class="alert alert-success wsalert wssignup-s" role="alert">
                                                        This is a success alert—check it out!
                                                    </div>
                                                    <div class="alert alert-warning wsalert wssignup-w" role="alert">
                                                        This is a warning alert—check it out!
                                                    </div>
                                                    <div class="modal-body">
                                                        <form action="/signup" method="post" id="signup1">
                                                            <div class="form-group">

                                                                <input type="text" class="form-control" id="email" name="email" placeholder="Name">
                                                            </div>
                                                            <div class="form-group">

                                                                <input type="password" class="form-control" id="password" name="password" placeholder="Password">
                                                            </div>
                                                            <div class="form-group">

                                                                <input type="password" class="form-control" id="password" name="password" placeholder="Confirm Password">
                                                            </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                       <button type="button" class="btn btn-danger" onclick="Signup()" data-dismiss="">Sign Up</button>
                                                    </div>
                                                    </form>
                                                </div>

                                            </div>
                                        </div>

                                    </li>
                                </ul>
                                {% else %}
                                <ul class="nav navbar-nav navbar-right">

                                    <li><a href="/">Home</a></li>
                                    <li><a href="/menu">Menu</a></li>
                                    <li><a href="#">Delivery</a></li>
                                    <li>
                                        <button type="button" class="btn btn-info btn-sm" id="signin" data-toggle="modal" data-target="#myModal1">{{email.user}}</button>
                                        <!-- Trigger the modal with a button -->      
                                    </li>
                                    <li><a href="/users/logout">Đăng xuất</a></li>
                                    <!-- Trigger the modal with a button -->
                                    <!-- Modal -->
                                </ul>
                                {% endif %}
                            </div>
                            <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container-fluid -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <script language="javascript">
        function Signup() {
            jQuery('.wsalert').slideUp('fast')
            jQuery('.wssignup-w').fadeTo(2000,500).slideUp(500,()=>{
                $('.wssignup-w').alert('close')
            })
            jQuery.ajax({
                    url: '/users/signup',
                    type: 'post',
                    data: jQuery('form#signup1').serialize(),
                    contentType: 'application/x-www-form-urlencoded'
                })
                .done(function(result) {

                    if (result.msg) {
                        jQuery('.wssignup-s').slideDown()
                        jQuery('.wssignup-s').text(result.msg)
                    } else {
                        jQuery('.wssignup-w').slideDown()
                        jQuery('.wssignup-w').text(result.msgErr)
                    }

                }).fail(err => {
                    jQuery('.wssignup-w').slideDown('ok')
                    jQuery('.wssignup-w').text(err.message)
                })
        }

        function Signin() {
            jQuery('.wsalert').slideUp('fast')
            jQuery('.wssignup-w').fadeTo(2000,500).slideUp(500,()=>{
                $('.wssignup-w').alert('close')
            })
            jQuery.ajax({
                    url: '/users/signin',
                    type: 'post',
                    data: jQuery('form#signin1').serialize(),
                    contentType: 'application/x-www-form-urlencoded'
                })
                .done(function(result) {
   
                    if (result.message) {
                        jQuery('.wssignup-w').slideDown()
                        jQuery('.wssignup-w').text(result.message)
                        
                    } else {
                        location.reload()
                        jQuery('.wssignup-s').slideDown()
                        jQuery('.wssignup-s').text(result.msg)
                    }
                })


        }

        
    </script>
    <!-- End Header Section -->
    <style>
        .wsalert {
            display: none;
        }
        
        .wsalert.ok {
            display: block;
        }
    </style>
</body>

</html>